# Hw-web1
# فرم‌ساز تعاملی با محاسبه‌گر فرمول

**نام:** ابوالفضل دانیالی  
**شماره دانشجویی:** 401110256  

## هدف

در این تمرین، هدف ایجاد یک صفحه‌ی وب است که برای یک فرمول (و به‌طور کلی هر فرمولی) مجموعه‌ای از ورودی‌ها را از کاربر دریافت کند و به‌صورت ریسپانسیو، با تغییر در ورودی‌ها، خروجی حاصل از فرمول را در لحظه محاسبه و نمایش دهد.

## ساختار پروژه

پروژه از سه فایل اصلی تشکیل شده است:

- `h.html`: نمایش المان‌ها در صفحه
- `Eval.js`: پیاده‌سازی منطق محاسبه فرمول‌ها
- `Style.css`: طراحی و تزیین صفحه

---

## توضیحات فایل‌ها

### `h.html`

- برای هر فرمول، مجموعه‌ای از ورودی‌ها در نظر گرفته شده است.
- هر ورودی با یک `textbox` دارای کلاس `input` و یک `id` منحصربه‌فرد مشخص می‌شود.
- این `id` معرف نام متغیر درون فرمول است. اگر مقدار اولیه نداشته باشد، نام آن با `placeholder` نمایش داده می‌شود.
- خروجی هر فرمول در یک `div` با کلاس `formula` نمایش داده می‌شود و خود فرمول به‌صورت attribute با نام `evaluator` ذخیره می‌گردد.

### مثال‌ها

چندین فرمول از جمله:
- مثال تمرین
- محیط و مساحت دایره
- محاسبه حقوق یک کارمند  
در این صفحه پیاده‌سازی شده‌اند.

### مدیریت خطاها

سه نوع خطا در نظر گرفته شده است:

1. **فرمول نامعتبر** (مثل `radius **`) → پیام: `Invalid Formula`
2. **ورودی نامشخص** (مثل `gift` که در تست کیس وجود ندارد) → پیام: `Invalid Formula`
3. **ورودی خالی** → پیام: `ورودی‌ها ناقص هستند`
4. **ورودی غیر عددی** → هشدار برای مقدار نامعتبر

---

### `Style.css`

از یک تمپلیت ساده برای ظاهر استفاده شده است. برخی ویژگی‌ها مانند `padding` با کمک ChatGPT انتخاب شده‌اند.

---

### `Eval.js`

تابع اصلی در این فایل `evaluateAllFormulas` است و عملکرد آن به صورت زیر است:

1. یافتن تمام فرمول‌ها با کلاس `formula` و استخراج فرمول از attribute به نام `evaluator`.
2. جدا کردن کلمات دارای حروف با استفاده از عبارت منظم `\b[a-zA-Z_]\w*\b` برای شناسایی نام متغیرها.
3. بررسی استفاده از توابع ثابت مانند `Math.PI` برای جلوگیری از اشتباه در شناسایی متغیرها. این موارد در `dotprops` ذخیره می‌شوند.
4. فیلتر کردن متغیرهای واقعی و ذخیره‌ی آن‌ها در `variables`.
5. استخراج مقدار هر متغیر از `textbox` متناظر و ذخیره در `scope`.
6. حذف `whitespace`ها و بررسی مقدار:
   - اگر مقدار تهی باشد، `hasEmpty` فعال می‌شود و پیام خطای مربوطه نمایش داده می‌شود.
   - اگر مقدار عددی نباشد (با regex `/^[-+]?\d*(\.\d+)?$/` بررسی می‌شود)، هشدار داده و از تابع خارج می‌شویم.
   - در غیر این‌صورت، مقدار به `float` تبدیل و در `scope` ذخیره می‌شود.
7. ایجاد تابع `func` که متغیرها را گرفته و فرمول را اجرا می‌کند. در صورت خطا، با `catch` پیام خطای فرمول نامعتبر نمایش داده می‌شود.

### ریسپانسیو بودن

برای ریسپانسیو کردن:
- به تمام `input`ها یک `eventListener` متصل شده است تا با هر تغییری در مقدار، تابع `evaluateAllFormulas` مجدد اجرا شود.
- بلافاصله پس از بارگذاری صفحه نیز یک بار این تابع فراخوانی می‌شود تا مقدار اولیه تمام فرمول‌ها محاسبه و نمایش داده شود.

---

